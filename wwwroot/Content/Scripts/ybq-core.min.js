var Ybq,TypeAheadContainerSettings,TypeAheadContainer;String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(n){return n.toUpperCase()})};Ybq=Ybq||{};Ybq.Internal={};Ybq.RootServer="";Ybq.fromServer=function(n){return Ybq.RootServer+n};Ybq.configureCommonElements=function(){$("a").click(function(){this.blur()});$("select").change(function(){if(this.blur(),$(this).attr("tabIndex")!==undefined){var n=parseInt($(this).attr("tabIndex"))+1;$(":input[tabindex="+n+"]")[0].focus()}});$(".alert .alert-autoclose").click(function(){$(this).hide()});$("input[data-digits-only]").attr("onkeypress","return event.charCode >= 48 && event.charCode <= 57");$("input[data-click-on-enter]").each(function(){$(this).attr("onkeyup","Ybq.clickOnEnter(event, '"+$(this).data("click-on-enter")+"')")});$("div.ybq-file-container").each(function(){var n=$(this).find("input[type=file]").first(),t;n.hide();t="#"+$(n).attr("id")+"-selected";$(t).text($(this).data("notselected"));$(n).change(function(n){var r=$(this).attr("id"),t=n.target.files,i;t&&t[0]&&(i=new FileReader,i.onload=function(n){$("#"+r+"-preview").attr("src",n.target.result)},i.readAsDataURL(t[0]))});$(n).click(function(n){return n.stopPropagation()})});$("div.ybq-file-container").click(function(){var n=$(this).find("input[type=file]").first(),r;$(n).click();var t=$(n).attr("id"),i="#"+t+"-preview",u=$(n).val();return $(i).attr("title",u),$(i).show(),r="#"+t+"-selected",$(r).hide(),$("button.ybq-file-remover").show(),!1});$("button.ybq-file-remover").click(function(){var u=$(this).parent().closest("div.ybq-file-container"),i=u.find("input[type=file]").first(),n,t,r;return $(i).val(""),n=$(i).attr("id"),t="#"+n+"-preview",$(t).removeAttr("src").removeAttr("title"),$(t).hide(),r="#"+n+"-selected",$(r).show(),$(this).hide(),!1})};Ybq.defaultImage=function(n,t){n.onerror="";n.src=t};Ybq.postForm=function(n,t,i){var r=$(n),u=new FormData(r[0]);r.find("input[type=file]").each(function(){u.append($(this).attr("name"),$(this)[0].files[0])});Ybq.notifyBeginOfOperation(n);$.ajax({cache:!1,url:r.attr("action"),type:r.attr("method"),dataType:"html",data:u,processData:!1,contentType:!1,success:function(i){Ybq.notifyEndOfOperation(n);t(i)},error:function(t){Ybq.notifyEndOfOperation(n);i(t)}})};Ybq.notifyBeginOfOperation=function(n){$(n+" input").attr("disabled","disabled");$(n+" button").attr("disabled","disabled");$(n+" a").attr("disabled","disabled");$(n+"-loader").show()};Ybq.notifyEndOfOperation=function(n){$(n+"-loader").hide();$(n+" button").removeAttr("disabled");$(n+" a").removeAttr("disabled");$(n+" input").removeAttr("disabled")};Ybq.invoke=function(n,t,i){$.ajax({cache:!1,url:Ybq.fromServer(n),success:t,error:i})};Ybq.goto=function(n){window.location=n};Ybq.gotoRelative=function(n){window.location=Ybq.fromServer(n)};Ybq.post=function(n,t,i,r){$.ajax({cache:!1,url:Ybq.fromServer(n),type:"post",data:t,success:i,error:r})};Ybq.toast=function(n,t,i){$(n).removeClass("alert-success alert-danger alert-info alert-warning");$(n).html(t);$(n).addClass(i?"alert-success":"alert-danger");$(n).show();window.setTimeout(function(){$(n).hide()},2500)};Ybq.validateEmail=function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)};Ybq.mobilize=function(){try{var n=WURFL.is_mobile;n&&$(".hidden-mobile").hide()}catch(t){}};Ybq.clickOnEnter=function(n,t){n.keyCode===13&&$(t).click()};Ybq.clearFormAfterTimeout=function(n,t){var i=2500;t!=undefined&&(i=t);window.setTimeout(function(){$(n+"-loader").hide();$(n+" div.has-feedback").removeClass("has-error");$(n+"-message").html("").hide();$(n+" input").removeAttr("has-error")},i)};Ybq.canAcceptValueOf=function(n,t,i,r,u){var f="#"+t,e=$(f).val();return i(e)?!0:((u==undefined||u.length===0)&&(u=t),$(n+"-message").removeClass("alert-success alert-danger alert-warning").addClass("alert-info").show().html(r),$(n+"-group-"+u).addClass("has-error"),$(f).focus(),!1)};Ybq.canAcceptFormContent=function(n,t){var u=0,f=[],r;Ybq.Internal.resetAllTabs(n);for(r in t)if(t.hasOwnProperty(r)){var i=t[r],e="#"+i.fieldId,o=$(e).val();i.validator(o)?$(n+"-group-"+i.fieldId).removeClass("has-error"):($(n+"-group-"+i.fieldId).addClass("has-error"),Ybq.Internal.tabErrorOn(n,i.tabId,!0),f[i.tabId]===undefined&&(f[i.tabId]=i.fieldId,$(e).focus()),u++)}return u===0};Ybq.Internal.resetAllTabs=function(n){$("div[role=tabpanel]").each(function(){var t=n+"-"+$(this).attr("id")+"-haserror";$(t).hide()})};Ybq.Internal.tabErrorOn=function(n,t,i){var r=n+"-"+t+"-haserror";i?$(r).show():$(r).hide()};TypeAheadContainerSettings=function(){var n={};return n.postOnSelection=!1,n.displayKey="value",n.hintUrl="",n.targetSelector="",n.buddySelector="",n.submitSelector="",n.showHint=!0,n.maxNumberOfHints=10,n.highlight=!0,n};TypeAheadContainer=function(n){var t=new TypeAheadContainerSettings;jQuery.extend(t,n);this.hintAdapter=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(t.displayKey),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:t.maxNumberOfHints,remote:t.hintUrl});$(t.targetSelector).on("typeahead:selected",function(n,i){$(t.targetSelector).attr("data-itemselected",1);$(t.buddySelector).val(i.id);t.postOnSelection&&$(t.submitSelector).click()});$(t.targetSelector).on("blur",function(){var n=$(t.targetSelector).attr("data-itemselected");n!=="1"&&($(t.targetSelector).val(""),$(t.buddySelector).val(""))});$(t.targetSelector).on("input",function(){var n=$(t.targetSelector).attr("data-itemselected");n==="1"&&($(t.targetSelector).attr("data-itemselected",0),$(t.buddySelector).val(""),$(t.targetSelector).val(""))});this.attach=function(){this.hintAdapter.initialize();$(t.targetSelector).typeahead({hint:t.showHint,highlight:t.highlight,limit:t.maxNumberOfHints,autoSelect:!1},{displayKey:t.displayKey,source:this.hintAdapter.ttAdapter(),templates:{suggestion:function(n){return"<p><span>"+n.value+"<\/span><i class='pull-right'>"+(n.label==null?"":n.label)+"<\/i><\/p>"}}})}};Ybq.fixDropdowns=function(){$(document).on("shown.bs.dropdown",".dropdown",function(){var n=$(this).children(".dropdown-menu"),f=$(this).children(".dropdown-toggle"),t=n.offset(),i=t.top-f.height()-n.height()-$(window).scrollTop(),r=$(window).scrollTop()+$(window).height()-(t.top+n.height()),u;r<0&&(i>=0||i>r)&&$(this).addClass("dropup");u=$(window).width()-(t.left+n.width());u<10&&n.addClass("dropdown-menu-right")}).on("hidden.bs.dropdown",".dropdown",function(){$(this).removeClass("dropup")})};Ybq.processMultipleAjaxResponse=function(n){return n.split("---|||---")};Ybq.printPopup=function(n,t,i){(t==null||t.length===0)&&(t="_blank");(i==null||i.length===0)&&(i="toolbar=no,scrollbars=yes,resizable=yes,top=100,left=100,width=580,height=720;");window.open(Ybq.fromServer(n),t,i)};